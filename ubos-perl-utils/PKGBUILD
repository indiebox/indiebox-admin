pkgname=$(basename $(pwd))
pkgver=0.37
pkgrel=1
pkgdesc="UBOS Perl utilities"
arch=('any')
url="http://ubos.net/"
developer=${url}
maintainer=${url}
license=('GPL')
depends=('perl' 'perl-lchown' 'perl-json' 'perl-log-log4perl' 'perl-log-journald')
backup=(
    'etc/ubos/log-default.conf'
    'etc/ubos/log-default-v1.conf'
    'etc/ubos/log-default-v2.conf'
    'etc/ubos/log-system.conf'
)
_vendor_perl=$(perl -V::vendorarch: | sed -e "s![' ]!!g")
options=('!strip')

package() {
    for f in ${startdir}/vendor_perl/UBOS/*.pm; do
        install -D -m755 ${f} -t ${pkgdir}${_vendor_perl}/UBOS/
    done

    # (hopefully) temporary patch to Perl's Archive::Zip
    install -D -m644 ${startdir}/vendor_perl/Archive/Zip/Member.pm -t ${pkgdir}${_vendor_perl}/Archive/Zip/

# Config files
    install -D -m644 ${startdir}/etc/ubos/log-*.conf -t ${pkgdir}/etc/ubos/
}
